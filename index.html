<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord Unifi√© - TCS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Base Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* bg-slate-100 */
            color: #1e293b; /* text-slate-800 */
        }

        /* Navigation Links */
        .nav-link {
            /* Mettre √† jour la taille du texte pour √™tre plus compact sur mobile */
            @apply px-3 py-2 rounded-xl text-slate-700 font-semibold hover:bg-emerald-100 hover:text-emerald-800 transition-all duration-200 text-sm; /* text-sm par d√©faut */
            /* La taille du texte passe √† md:text-base sur desktop */
            @apply md:text-base; 
        }
        .nav-link.active {
            @apply bg-emerald-600 text-white hover:bg-emerald-700 shadow-md shadow-emerald-400/50;
        }

        /* Dictionary Navigation Links (Sidebar Style) */
        .dict-link {
            @apply block w-full text-left px-5 py-3 rounded-xl text-slate-700 hover:bg-emerald-50 hover:text-emerald-800 transition-colors duration-150 border-l-4 border-transparent;
        }
        .dict-link.active {
            @apply bg-emerald-50 text-emerald-800 font-bold border-l-4 border-emerald-600;
        }

        /* Chart Containers - Ajustements mineurs */
        .chart-container-mcd {
            position: relative;
            width: 100%;
            max-width: 450px;
            height: 350px;
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .chart-container-large {
            position: relative;
            width: 100%;
            /* max-width r√©duit l√©g√®rement pour une meilleure int√©gration sur les tablettes */
            max-width: 550px; 
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
         @media (min-width: 768px) {
             .chart-container-large {
                 height: 400px;
                 max-width: 600px; /* Revenir √† 600px sur desktop */
             }
         }
        .chart-container-small {
            position: relative;
            width: 100%;
            max-width: 450px;
            height: 300px;
            max-height: 300px;
            margin: auto;
        }


        /* Entity Boxes (Diagram) */
        .entity-box {
            @apply relative p-3 md:p-4 bg-emerald-700 border border-emerald-500 rounded-xl shadow-lg text-center text-xs sm:text-sm md:text-base font-semibold text-white z-10; /* Texte plus petit sur mobile */
        }
        .connector-line {
            @apply absolute bg-slate-500 opacity-60;
            z-index: 0;
        }

        /* Animations */
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Style */
        .app-card {
            @apply bg-white p-6 rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-100;
            @apply md:p-8; /* Plus de padding sur desktop */
        }

        /* Infographic Flow Box Style */
        .flow-box {
            @apply bg-white p-6 rounded-lg shadow-md text-center border-t-4 border-emerald-500;
        }

        /* Logic Badges */
        .badge-base {
            @apply inline-block px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider;
        }
        .badge-blue { @apply badge-base bg-blue-100 text-blue-800; }
        .badge-gray { @apply badge-base bg-slate-200 text-slate-700; }
        .badge-purple { @apply badge-base bg-purple-100 text-purple-800; }
        .badge-yellow { @apply badge-base bg-amber-100 text-amber-800; }
        .badge-green { @apply badge-base bg-emerald-100 text-emerald-800; }
        .badge-red { @apply badge-base bg-red-100 text-red-800; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <nav class="sticky top-0 bg-white shadow-lg z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20 md:h-24"> <div class="flex-shrink-0">
                    <h1 class="text-2xl sm:text-3xl md:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-600 via-orange-500 to-emerald-600 drop-shadow-md">
                        TCS Tableau de Bord
                    </h1>
                </div>

                <div class="md:hidden">
                    <button id="menu-toggle" class="text-slate-500 hover:text-slate-800 focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>

                <div class="hidden md:flex flex-wrap items-center justify-end space-x-2 sm:space-x-3" id="main-nav-links-desktop">
                    <button class="nav-link active" data-target="accueil">Accueil</button>
                    <button class="nav-link" data-target="technologie">Technologie</button>
                    <button class="nav-link" data-target="impact">Impact</button>
                    <button class="nav-link" data-target="schema_mcd">Sch√©ma MCD</button>
                    <button class="nav-link" data-target="dictionnaire">Dictionnaire</button>
                    <button class="nav-link" data-target="logique">Logique M√©tier</button>
                </div>
            </div>
            <div id="main-nav-links-mobile" class="hidden md:hidden pb-4 space-y-2 flex flex-col">
                <button class="nav-link active" data-target="accueil">Accueil</button>
                <button class="nav-link" data-target="technologie">Technologie</button>
                <button class="nav-link" data-target="impact">Impact</button>
                <button class="nav-link" data-target="schema_mcd">Sch√©ma MCD</button>
                <button class="nav-link" data-target="dictionnaire">Dictionnaire</button>
                <button class="nav-link" data-target="logique">Logique M√©tier</button>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-8 lg:p-12">

        <section id="accueil" class="page-section animate-fade-in space-y-14">
            <div class="bg-gradient-to-r from-red-600 via-orange-500 to-emerald-600 p-6 md:p-12 rounded-3xl shadow-2xl text-white"> <h2 class="text-3xl md:text-5xl font-extrabold mb-4 drop-shadow-lg">TCS: La R√©volution du Contr√¥le de P√©age</h2> <p class="text-lg md:text-xl font-light opacity-95 leading-relaxed">
                    Une solution compl√®te par NOISIM pour g√©rer les recettes, optimiser la s√©curit√© routi√®re et assainir les caisses de l'√âtat.
                </p>
            </div>

            <div class="app-card">
                 <h2 class="text-2xl md:text-3xl font-bold text-center mb-4">Une Solution, Deux Volets Op√©rationnels</h2> <p class="text-md md:text-lg text-gray-600 text-center max-w-3xl mx-auto mb-12">
                    Le syst√®me TCS est con√ßu pour g√©rer nativement les deux types de flux de p√©age, assurant une couverture compl√®te de vos op√©rations.
                </p>
                <div class="flex flex-col lg:flex-row justify-center items-center lg:items-stretch space-y-8 lg:space-y-0 lg:space-x-8"> <div class="flow-box flex-1">
                        <span class="text-5xl">üí≥</span>
                        <h3 class="text-xl md:text-2xl font-semibold text-emerald-700 my-3">Volet ABONNEMENT</h3>
                        <p class="text-gray-600 text-sm md:text-base">
                            Gestion optimis√©e des clients enregistr√©s. Inclut la gestion des comptes pr√©pay√©s, le t√©l√©p√©age (via badge `ABONNEE`) et la r√©initialisation de cartes (`RESETCARD`).
                        </p>
                    </div>
                    
                    <div class="flow-box flex-1 border-orange-500">
                        <span class="text-5xl">üöó</span>
                        <h3 class="text-xl md:text-2xl font-semibold text-orange-600 my-3">Volet NON ABONNEMENT</h3>
                        <p class="text-gray-600 text-sm md:text-base">
                            Capture et gestion des passages uniques. Traitement des paiements au comptant (esp√®ces, carte) et application des tarifs bas√©s sur la classification des v√©hicules.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="technologie" class="page-section hidden animate-fade-in">
             <div class="app-card overflow-hidden">
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                     <div class="p-4 md:p-8">
                         <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">Technologie Cl√©: La Borne VIDAR d'Essieux</h2>
                         <p class="text-base md:text-lg text-gray-600 mb-6">
                             Le c≈ìur de notre pr√©cision. La borne VIDAR utilise une analyse d'image bas√©e sur l'IA et un scan lat√©ral pour un comptage d'essieux "ultra-pr√©cis" et une classification automatique des v√©hicules.
                         </p>
                         <div class="space-y-4">
                             <div class="flex items-center">
                                 <span class="text-emerald-500 text-xl mr-3">‚úî</span>
                                 <span class="text-gray-700 text-sm md:text-base">Comptage pr√©cis, m√™me des essieux relevables.</span>
                             </div>
                             <div class="flex items-center">
                                 <span class="text-emerald-500 text-xl mr-3">‚úî</span>
                                 <span class="text-gray-700 text-sm md:text-base">Classification automatique (gabarit, structure).</span>
                             </div>
                             <div class="flex items-center">
                                 <span class="text-emerald-500 text-xl mr-3">‚úî</span>
                                 <span class="text-gray-700 text-sm md:text-base">Optimisation des flux et automatisation de la tarification.</span>
                             </div>
                         </div>
                     </div>
                     <div class="bg-slate-50 p-6 md:p-8 flex items-center justify-center rounded-xl"> <div class="w-full">
                             <h3 class="text-lg md:text-xl font-semibold text-center mb-4">Pr√©cision de Classification (VIDAR vs. Ancien)</h3>
                             <div class="chart-container-small">
                                 <canvas id="accuracyChart"></canvas>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
        </section>

        <section id="impact" class="page-section hidden animate-fade-in">
            <div class="app-card mb-12">
                 <h2 class="text-3xl md:text-4xl font-extrabold text-emerald-700 mb-4">L'Impact du TCS en Donn√©es</h2>
                 <p class="text-lg md:text-xl text-slate-600 leading-relaxed">
                    La mise en place du syst√®me TCS a un impact direct et mesurable sur les recettes et la compr√©hension du trafic.
                </p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 md:gap-14">
                <div class="app-card">
                    <h3 class="text-xl md:text-2xl font-semibold text-center mb-6">Optimisation des Recettes</h3>
                    <p class="text-gray-600 text-center mb-6 text-sm md:text-base">R√©duction des pertes et augmentation des recettes collect√©es gr√¢ce √† l'automatisation et au contr√¥le rigoureux.</p>
                    <div class="chart-container-large">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>

                <div class="app-card">
                    <h3 class="text-xl md:text-2xl font-semibold text-center mb-6">Analyse du Flux de Trafic (par VIDAR)</h3>
                    <p class="text-gray-600 text-center mb-6 text-sm md:text-base">Classification automatique permettant une analyse fine du trafic par classe de v√©hicule pour la maintenance et la tarification.</p>
                    <div class="chart-container-large">
                        <canvas id="trafficChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="schema_mcd" class="page-section hidden animate-fade-in">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 md:gap-14">
                <div class="app-card">
                    <h3 class="text-xl md:text-2xl font-bold text-slate-800 mb-6 border-b-2 border-emerald-100 pb-2 text-center">Sch√©ma Conceptuel Abstrait</h3>
                    <p class="text-slate-600 mb-8 text-center leading-relaxed text-sm md:text-base">Repr√©sentation des relations cl√©s entre les entit√©s pour une vue d'ensemble rapide.</p>
                    
                    <div class="relative h-[400px] sm:h-[500px] md:h-[600px] lg:h-[650px] p-2 flex justify-center items-center"> <div class="relative w-full max-w-xl h-full">
                            <div class="entity-box" style="top: 50%; left: 50%; transform: translate(-50%, -50%);">TRANSACTION</div>
                            <div class="entity-box" style="top: 20%; left: 50%; transform: translate(-50%, -50%);">VOIE</div>
                            <div class="entity-box" style="top: 50%; left: 10%; transform: translate(-50%, -50%);">VEHICULE</div>
                            <div class="entity-box" style="top: 20%; left: 10%; transform: translate(-50%, -50%);">CLIENT</div>
                            <div class="entity-box" style="top: 0%; left: 10%; transform: translate(-50%, -50%);">ABONNE</div>
                            <div class="entity-box" style="top: 80%; left: 50%; transform: translate(-50%, -50%);">EMPLOYE</div>
                            <div class="entity-box" style="top: 80%; left: 90%; transform: translate(-50%, -50%);">REDDITION</div>
                            <div class="connector-line" style="top: 12%; left: 10%; width: 2px; height: 8%;"></div>
                            <div class="connector-line" style="top: 32%; left: 10%; width: 2px; height: 18%;"></div>
                            <div class="connector-line" style="top: 50%; left: 24%; width: 26%; height: 2px;"></div>
                            <div class="connector-line" style="top: 32%; left: 50%; width: 2px; height: 18%;"></div>
                            <div class="connector-line" style="top: 62%; left: 50%; width: 2px; height: 18%;"></div>
                            <div class="connector-line" style="top: 80%; left: 69%; width: 21%; height: 2px;"></div>
                        </div>
                    </div>
                </div>

                <div class="app-card">
                    <h3 class="text-xl md:text-2xl font-bold text-slate-800 mb-6 border-b-2 border-emerald-100 pb-2 text-center">Statistiques et Couverture du Mod√®le</h3>
                    <p class="text-slate-600 mb-8 text-center leading-relaxed text-sm md:text-base">R√©partition th√©matique des entit√©s pour comprendre la profondeur de la couverture fonctionnelle.</p>
                    <div class="chart-container-mcd">
                        <canvas id="modelStatsChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="dictionnaire" class="page-section hidden animate-fade-in">
            <div class="app-card mb-12">
                <h2 class="text-3xl md:text-4xl font-extrabold text-emerald-700 mb-4">Dictionnaire des Donn√©es <span class="text-lg md:text-xl text-slate-400 ml-2">(Entit√©s et Attributs)</span></h2>
                <p class="text-md md:text-xl text-slate-600 leading-relaxed">
                    S√©lectionnez une entit√© ci-dessous pour afficher ses attributs, contraintes (Cl√©s Primaires/√âtrang√®res) et ses relations fondamentales avec le reste du MCD.
                </p>
            </div>

            <div class="flex flex-col md:flex-row gap-8 md:gap-14">
                <nav class="w-full md:w-1/4">
                    <h4 class="text-lg font-bold text-slate-700 mb-3 ml-2 uppercase tracking-wider">Liste des Entit√©s</h4>
                    <ul class="space-y-1 app-card p-2">
                        <li><button class="dict-link" data-entity="CLIENT">1. CLIENT</button></li>
                        <li><button class="dict-link" data-entity="ABONNE">2. ABONNE</button></li>
                        <li><button class="dict-link" data-entity="VEHICULE">3. VEHICULE</button></li>
                        <li class="border-t border-slate-100 my-1"></li>
                        <li><button class="dict-link" data-entity="VOIE">4. VOIE</button></li>
                        <li><button class="dict-link" data-entity="TRANSACTION">5. TRANSACTION</button></li>
                        <li class="border-t border-slate-100 my-1"></li>
                        <li><button class="dict-link" data-entity="EMPLOYE">6. EMPLOYE</button></li>
                        <li><button class="dict-link" data-entity="REDDITION">7. REDDITION</button></li>
                    </ul>
                </nav>

                <div class="w-full md:w-3/4 app-card min-h-[500px]" id="entityDetailContainer">
                    <div class="flex flex-col items-center justify-center h-full text-center p-4">
                        <span class="text-6xl sm:text-7xl mb-6 text-emerald-500">
                             <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20M6.5 2h13.12l-5.38 5.38c-1.33 1.33-1.33 3.49 0 4.82L15.62 17"/></svg>
                        </span>
                        <h3 class="text-2xl md:text-3xl font-bold text-slate-700 mb-3">S√©lectionnez une Entit√© de Base</h3>
                        <p class="text-lg md:text-xl text-slate-500 max-w-md">Les d√©finitions du mod√®le sont essentielles pour l'int√©gration de la plateforme TCS.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="logique" class="page-section hidden animate-fade-in">
            <div class="app-card mb-12">
                <h2 class="text-3xl md:text-4xl font-extrabold text-emerald-700 mb-4">Logique M√©tier (Fonctions TCS)</h2>
                <p class="text-md md:text-xl text-slate-600 leading-relaxed">
                    **Analyse Data Expert** : Le mod√®le est structur√© pour une s√©paration claire entre les syst√®mes d'acquisition des donn√©es en voie (T√©l√©p√©age/Comptage) et les syst√®mes de gestion des recettes et de l'administration (Back Office).
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 md:gap-14">
                <div class="app-card border-t-8 border-emerald-600">
                    <h3 class="text-2xl md:text-3xl font-extrabold text-emerald-800 mb-6">Volet ABONNEMENT - Acquisition de Donn√©es en Voie</h3>
                    <div class="space-y-8">
                        <div>
                            <h4 class="text-xl md:text-2xl font-bold text-slate-900 mb-2">TCS T√âL√âP√âAGE</h4>
                            <p class="text-slate-600 mb-3 leading-relaxed text-sm md:text-base">Gestion des passages rapides (badge, RFID) : v√©rification du statut d'abonn√©, d√©duction du solde (le cas √©ch√©ant) et g√©n√©ration de la TRANSACTION de passage.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="badge-blue">ABONNE</span>
                                <span class="badge-blue">VEHICULE</span>
                                <span class="badge-blue">VOIE (D√©di√©e)</span>
                                <span class="badge-blue">TRANSACTION</span>
                            </div>
                        </div>
                        <div class="border-t border-slate-100 pt-5">
                            <h4 class="text-xl md:text-2xl font-bold text-slate-900 mb-2">TCS COMPTAGE</h4>
                            <p class="text-slate-600 mb-3 leading-relaxed text-sm md:text-base">Acquisition de donn√©es non-financi√®res pour les abonn√©s (classification, comptage d'essieux via borne VIDAR) pour validation du tarif ou statistiques de flux.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="badge-gray">TRANSACTION</span>
                                <span class="badge-gray">VOIE</span>
                                <span class="badge-gray">VEHICULE</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="app-card border-t-8 border-slate-600">
                    <h3 class="text-2xl md:text-3xl font-extrabold text-slate-800 mb-6">Volet NON ABONNEMENT - Gestion des Recettes & Supervision</h3>
                    <div class="space-y-8">
                        <div>
                            <h4 class="text-xl md:text-2xl font-bold text-slate-900 mb-2">TCS ADMINISTRATION</h4>
                            <p class="text-slate-600 mb-3 leading-relaxed text-sm md:text-base">Gestion des utilisateurs du syst√®me (EMPLOYE) et des entit√©s de base (tarifs, configuration des VOIE), ainsi que l'administration des comptes CLIENT/ABONNE.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="badge-green">EMPLOYE (Admin)</span>
                                <span class="badge-green">CLIENT/ABONNE</span>
                                <span class="badge-green">VOIE (Configuration)</span>
                            </div>
                        </div>
                        <div class="border-t border-slate-100 pt-5">
                            <h4 class="text-xl md:text-2xl font-bold text-slate-900 mb-2">TCS VOIE</h4>
                            <p class="text-slate-600 mb-3 leading-relaxed text-sm md:text-base">Op√©rations directes des percepteurs en voie : enregistrement manuel ou semi-automatique des transactions (esp√®ces/carte), gestion des incidents et des √©vasions.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="badge-purple">EMPLOYE (Percepteur)</span>
                                <span class="badge-purple">VOIE</span>
                                <span class="badge-purple">TRANSACTION</span>
                            </div>
                        </div>
                        <div class="border-t border-slate-100 pt-5">
                            <h4 class="text-xl md:text-2xl font-bold text-slate-900 mb-2">TCS REDDITION</h4>
                            <p class="text-slate-600 mb-3 leading-relaxed text-sm md:text-base">Processus de Back Office effectu√© par les percepteurs pour le d√©compte et la d√©claration de leurs recettes (caisse). La REDDITION lie le montant d√©clar√© √† l'EMPLOYE.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="badge-yellow">REDDITION</span>
                                <span class="badge-yellow">EMPLOYE (Percepteur)</span>
                                <span class="badge-yellow">TRANSACTION (Somme)</span>
                            </div>
                        </div>
                        <div class="border-t border-slate-100 pt-5">
                            <h4 class="text-xl md:text-2xl font-bold text-slate-900 mb-2">TCS SUPERVISION</h4>
                            <p class="text-slate-600 mb-3 leading-relaxed text-sm md:text-base">Surveillance des op√©rations en temps r√©el ou post-op√©rationnelle (Superviseurs/Auditeurs) pour le contr√¥le de fraude et la validation de la coh√©rence des TRANSACTIONS et REDDITIONS.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="badge-red">EMPLOYE (Superviseur)</span>
                                <span class="badge-red">TRANSACTION</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-8 mt-16 bg-white shadow-inner text-slate-500 text-sm border-t border-slate-200">
        ¬© 2025 NOISIM Engineering Services - Tous droits r√©serv√©s. <br>
        Application d'exploration du MCD - Optimis√©e pour le syst√®me TCS.
    </footer>

    <script>
        // DATA MODEL DEFINITION (unchanged)
        const modelData = {
            CLIENT: { /* ... data unchanged ... */ },
            ABONNE: { /* ... data unchanged ... */ },
            VEHICULE: { /* ... data unchanged ... */ },
            VOIE: { /* ... data unchanged ... */ },
            TRANSACTION: { /* ... data unchanged ... */ },
            EMPLOYE: { /* ... data unchanged ... */ },
            REDDITION: { /* ... data unchanged ... */ }
        };

        // --- Dictionnaire Functions (unchanged) ---
        const generateTableHTML = (attributes) => {
            let rows = attributes.map(attr => `
                <tr class="border-b border-slate-100 hover:bg-emerald-50/50 transition-colors duration-100">
                    <td class="py-3 px-4 font-medium ${attr.constraints.includes('Cl√© Primaire') ? 'text-emerald-700 font-extrabold' : attr.constraints.includes('Cl√© √âtrang√®re') ? 'text-slate-700 font-semibold' : 'text-slate-800'} text-sm sm:text-base">${attr.name}</td>
                    <td class="py-3 px-4 text-slate-600 text-sm sm:text-base">${attr.type}</td>
                    <td class="py-3 px-4 text-slate-500 text-sm sm:text-base">${attr.constraints || '---'}</td>
                </tr>
            `).join('');
            return `
                <h3 class="text-3xl font-extrabold text-slate-800 mb-6">${attributes[0].name.replace('ID', '').toUpperCase()} : Attributs</h3>
                <div class="overflow-x-auto rounded-xl border border-slate-200">
                    <table class="w-full min-w-max text-left">
                        <thead class="bg-slate-50 border-b border-slate-200">
                            <tr>
                                <th class="py-3 px-4 text-xs sm:text-sm font-bold text-slate-600 uppercase tracking-wider">Attribut</th>
                                <th class="py-3 px-4 text-xs sm:text-sm font-bold text-slate-600 uppercase tracking-wider">Type</th>
                                <th class="py-3 px-4 text-xs sm:text-sm font-bold text-slate-600 uppercase tracking-wider">Contrainte / Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${rows}
                        </tbody>
                    </table>
                </div>
            `;
        };
        const generateRelationsHTML = (relations) => {
            if (relations.length === 0) return '';
            const listItems = relations.map(rel => `<li class="text-slate-700 text-sm md:text-base flex items-start"><span class="text-emerald-500 text-2xl mr-3 mt-[-4px]">üîó</span>${rel}</li>`).join('');
            return `
                <h4 class="text-2xl font-bold text-slate-800 mt-10 mb-4 border-b border-slate-200 pb-2">Relations Cl√©s</h4>
                <ul class="space-y-3">${listItems}</ul>
            `;
        };

        const renderEntityDetails = (entityName) => {
            const data = modelData[entityName];
            if (!data) return;

            const detailContainer = document.getElementById('entityDetailContainer');
            detailContainer.innerHTML = `
                ${generateTableHTML(data.attributes)}
                ${generateRelationsHTML(data.relations)}
            `;
            detailContainer.classList.add('animate-fade-in');
        };

        // --- Navigation Functions (unchanged logic, applied to new mobile/desktop structure) ---
        document.querySelectorAll('.nav-link').forEach(button => {
            button.addEventListener('click', (e) => {
                const targetId = e.target.dataset.target;
                
                // 1. Hide all pages
                document.querySelectorAll('.page-section').forEach(section => {
                    section.classList.add('hidden');
                    section.classList.remove('animate-fade-in');
                });

                // 2. Show the target page
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                    targetSection.classList.add('animate-fade-in');
                }

                // 3. Update active state for all nav links (mobile and desktop)
                document.querySelectorAll('.nav-link').forEach(nav => nav.classList.remove('active'));
                
                // Find and set active state for all links with the same target
                document.querySelectorAll(`.nav-link[data-target="${targetId}"]`).forEach(nav => nav.classList.add('active'));

                // 4. Close mobile menu if open
                const mobileNav = document.getElementById('main-nav-links-mobile');
                if (!mobileNav.classList.contains('hidden')) {
                     mobileNav.classList.add('hidden');
                }
            });
        });

        // --- Dictionary Navigation (updated active state logic) ---
        document.querySelectorAll('.dict-link').forEach(button => {
            button.addEventListener('click', (e) => {
                const entityName = e.target.dataset.entity;

                // 1. Render details
                renderEntityDetails(entityName);
                
                // 2. Update active state
                document.querySelectorAll('.dict-link').forEach(link => link.classList.remove('active'));
                e.target.classList.add('active');
            });
        });

        // --- Mobile Menu Toggle Logic (NEW) ---
        document.getElementById('menu-toggle').addEventListener('click', () => {
             const mobileNav = document.getElementById('main-nav-links-mobile');
             mobileNav.classList.toggle('hidden');
        });


        // --- Chart Functions (unchanged) ---
        document.addEventListener('DOMContentLoaded', () => {
            // Placeholder/Example data for charts
            const accuracyData = {
                labels: ['VIDAR', 'Ancien Syst√®me'],
                datasets: [{
                    label: 'Pr√©cision de Classification (%)',
                    data: [99.8, 85.5],
                    backgroundColor: ['#059669', '#cbd5e1'],
                }]
            };

            new Chart(document.getElementById('accuracyChart'), {
                type: 'bar',
                data: accuracyData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        title: { display: false }
                    }
                }
            });

            const revenueData = {
                 labels: ['2023 Q1', '2023 Q2', '2023 Q3', '2023 Q4', '2024 Q1 (TCS)'],
                 datasets: [{
                     label: 'Recettes (M‚Ç¨)',
                     data: [15.2, 16.1, 15.8, 16.5, 19.3],
                     borderColor: '#059669',
                     backgroundColor: 'rgba(5, 150, 105, 0.2)',
                     tension: 0.4,
                     fill: true,
                 }]
            };

            new Chart(document.getElementById('revenueChart'), {
                 type: 'line',
                 data: revenueData,
                 options: {
                     responsive: true,
                     maintainAspectRatio: false,
                     scales: {
                         y: { beginAtZero: false }
                     },
                     plugins: {
                         legend: { display: true, position: 'top' },
                         title: { display: false }
                     }
                 }
            });

            const trafficData = {
                 labels: ['Classe 1 (L√©ger)', 'Classe 2 (Interm√©diaire)', 'Classe 3 (Lourd)'],
                 datasets: [{
                     label: 'Pourcentage du Flux',
                     data: [65, 20, 15],
                     backgroundColor: ['#3b82f6', '#f59e0b', '#dc2626'],
                 }]
            };

            new Chart(document.getElementById('trafficChart'), {
                 type: 'doughnut',
                 data: trafficData,
                 options: {
                     responsive: true,
                     maintainAspectRatio: false,
                     plugins: {
                         legend: { position: 'bottom' },
                         title: { display: false }
                     }
                 }
            });

            const modelStatsData = {
                 labels: ['Client/Abonnement', 'Op√©rations/Transactions', 'Administration/Employ√©s'],
                 datasets: [{
                     label: 'Nombre d\'Entit√©s',
                     data: [3, 2, 2],
                     backgroundColor: ['#059669', '#2563eb', '#f59e0b'],
                 }]
            };
            new Chart(document.getElementById('modelStatsChart'), {
                 type: 'polarArea',
                 data: modelStatsData,
                 options: {
                     responsive: true,
                     maintainAspectRatio: false,
                     plugins: {
                         legend: { position: 'bottom' },
                         title: { display: false }
                     }
                 }
            });

        });
    </script>
</body>
</html>
